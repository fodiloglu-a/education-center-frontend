<div class="course-list-container">
    <app-loading-spinner *ngIf="isLoading"></app-loading-spinner>

    <app-alert-dialog
            *ngIf="errorMessage"
            [message]="errorMessage"
            type="error"
            [autoClose]="true"
            (closed)="clearMessages()">
    </app-alert-dialog>

    <section class="top-selling-section">
        <div class="no-data-content">
            <img src="assets/logo/Logo.png"
                 alt="{{ 'EDUCATION_CENTER' | translate }}"
                 class="no-data-image" />

            <h3 class="no-data-title">{{ 'EXPLORE_MORE_COURSES' | translate }}</h3>
            <p class="no-data-description">
                <ng-container *ngIf="isLoggedIn">{{ 'EXPLORE_PERSONALIZED_RECOMMENDATIONS_MESSAGE_LOGGED_IN' | translate }}</ng-container>
                <ng-container *ngIf="!isLoggedIn">{{ 'EXPLORE_PERSONALIZED_RECOMMENDATIONS_MESSAGE_NOT_LOGGED_IN' | translate }}</ng-container>
            </p>

            <button class="action-button primary-btn large" (click)="goToExternalPurchaseSite()">
                <i class="icon-external-link"></i>
                {{ 'GO_TO_EDUCATION_CENTER' | translate }}
            </button>
        </div>
    </section>

    <section class="all-courses-section" *ngIf="!isLoading && allCourses.length > 0">
        <h2 class="section-title">{{ 'MY_PURCHASED_COURSES' | translate }}</h2>
        <p class="section-subtitle">{{ 'BROWSE_MY_PURCHASED_COURSES_SUBTITLE' | translate }}</p>

        <div class="course-cards-grid">
            <div class="course-card"
                 *ngFor="let course of allCourses"
                 [routerLink]="['/courses', course.id]"
                 (click)="onCourseClick(course.id)">

                <div class="course-image-wrapper">
                    <img [src]="course.imageUrl"
                         [alt]="course.title"
                         class="course-image"
                         onerror="this.onerror=null;this.src='assets/logo/Logo.png';" />

                    <span class="category-badge">
                      {{ getCategoryTranslation(course.category) }}
                    </span>
                </div>

                <div class="card-content">
                    <h3 class="course-title">{{ course.title }}</h3>
                    <p class="course-description">{{ course.description }}</p>

                    <div class="course-meta">
                      <span class="instructor-name">
                        <i class="icon-user"></i>
                          {{ course.instructorName }}
                      </span>

                        <div class="rating-info compact" *ngIf="course.averageRating > 0">
                            <i class="star filled"></i>
                            <span>{{ course.averageRating | number:'1.1-1' }}</span>
                        </div>
                    </div>

                    <div class="course-footer">
                        <span class="course-price">{{ formatPrice(course.price) }}</span>
                        <button class="view-details-button secondary-btn">
                            {{ 'DETAILS' | translate }}
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div *ngIf="!isLoading && allCourses.length === 0 && !errorMessage" class="empty-state">
        <i class="icon-book-open empty-icon"></i>
        <h3>{{ 'NO_PURCHASED_COURSES_FOUND' | translate }}</h3>
        <p>{{ 'NO_PURCHASED_COURSES_FOUND' | translate }}</p>
        <button class="action-button secondary-btn" (click)="refreshPage()">
            <i class="icon-refresh"></i>
            {{ 'REFRESH' | translate }}
        </button>
    </div>
</div>