<div class="app-container">
    <header class="app-header">
        <div class="header-content">
            <a routerLink="/" class="app-logo" (click)="closeMobileMenu()">
                <img *ngIf="isDarkMode" src="assets/logo/Logo.png" alt="Koyu Mod Logo" class="app-logo-img">
                <img *ngIf="!isDarkMode" src="assets/logo/Logo.png" alt="A√ßƒ±k Mod Logo" class="app-logo-img">
            </a>

            <nav class="desktop-nav">
                <ul class="nav-links">
                    <li><a routerLink="/home" routerLinkActive="active" (click)="closeMobileMenu()">{{ 'HOME' | translate }}</a></li>
                    <li><a routerLink="/courses" routerLinkActive="active">{{ 'COURSES' | translate }}</a></li>
                    <li *ngIf="isLoggedIn$ | async"><a routerLink="/profile" routerLinkActive="active">{{ 'PROFILE' | translate }}</a></li>
                    <li *ngIf="isLoggedIn$ | async"><a routerLink="/reviews" routerLinkActive="active">{{ 'ACTIVATION' | translate }}</a></li>
                    <li *ngIf="(hasRole('ROLE_ADMIN') | async) || (hasRole('ROLE_INSTRUCTOR') | async)"><a routerLink="/instructor" routerLinkActive="active">{{ 'ADMIN_PANEL' | translate }}</a></li>
                </ul>
            </nav>

            <div class="header-actions">
                <div class="lang-switcher desktop-only">
                    <button class="lang-toggle-button" (click)="toggleLanguageDropdown()">
                        <span class="material-icons">language</span> </button>
                    <div class="lang-dropdown" [class.open]="isLanguageDropdownOpen">
                        <button class="lang-option-button" (click)="switchLanguage('uk'); closeMobileMenu()">
                            <span class="flag-emoji">üá∫üá¶</span> –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞
                        </button>
                        <button class="lang-option-button" (click)="switchLanguage('tr'); closeMobileMenu()">
                            <span class="flag-emoji">üáπüá∑</span> T√ºrk√ße
                        </button>
                    </div>
                </div>

                <button class="theme-toggle desktop-only" (click)="toggleTheme()">
                    <ng-container *ngIf="isDarkMode">
                        <span class="material-icons">light_mode</span>
                    </ng-container>
                    <ng-container *ngIf="!isDarkMode">
                        <span class="material-icons">dark_mode</span>
                    </ng-container>
                </button>

                <ng-container *ngIf="!(isLoggedIn$ | async); else loggedInActions">
                    <button class="auth-button primary-btn" routerLink="/auth/login">{{ 'LOGIN' | translate }}</button>
                    <button class="auth-button secondary-btn" routerLink="/auth/register">{{ 'REGISTER' | translate }}</button>
                </ng-container>
                <ng-template #loggedInActions>
                    <button class="auth-button primary-btn" (click)="logout()">{{ 'LOGOUT' | translate }}</button>
                </ng-template>
            </div>

            <button class="menu-toggle" (click)="toggleMobileMenu()">
                <span class="material-icons" *ngIf="!(isMenuOpen$ | async)">menu</span>
                <span class="material-icons" *ngIf="isMenuOpen$ | async">close</span>
            </button>
        </div>
    </header>

    <nav class="mobile-nav" [class.open]="isMenuOpen$ | async">
        <ul class="nav-links">
            <li><a routerLink="/home" routerLinkActive="active" (click)="closeMobileMenu()">{{ 'HOME' | translate }}</a></li>
            <li><a routerLink="/courses" routerLinkActive="active" (click)="closeMobileMenu()">{{ 'COURSES' | translate }}</a></li>
            <li *ngIf="isLoggedIn$ | async"><a routerLink="/profile" routerLinkActive="active" (click)="closeMobileMenu()">{{ 'PROFILE' | translate }}</a></li>
            <li *ngIf="isLoggedIn$ | async"><a routerLink="/reviews" routerLinkActive="active" (click)="closeMobileMenu()">{{ 'REVIEWS' | translate }}</a></li>
            <li *ngIf="(hasRole('ROLE_ADMIN') | async) || (hasRole('ROLE_INSTRUCTOR') | async)"><a routerLink="/instructor" routerLinkActive="active" (click)="closeMobileMenu()">{{ 'ADMIN_PANEL' | translate }}</a></li>

            <li class="mobile-menu-item">
                <button class="mobile-menu-action-button" (click)="toggleLanguageDropdown()">
                    <span class="material-icons">language</span> {{ 'LANGUAGE' | translate }}
                </button>
                <div class="lang-dropdown mobile-dropdown" [class.open]="isLanguageDropdownOpen">
                    <button class="lang-option-button" (click)="switchLanguage('uk'); closeMobileMenu()">
                        <span class="flag-emoji">üá∫üá¶</span> –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞
                    </button>
                    <button class="lang-option-button" (click)="switchLanguage('tr'); closeMobileMenu()">
                        <span class="flag-emoji">üáπüá∑</span> T√ºrk√ße
                    </button>
                </div>
            </li>

            <li class="mobile-menu-item">
                <button class="mobile-menu-action-button" (click)="toggleTheme(); closeMobileMenu()">
                    <ng-container *ngIf="isDarkMode">
                        <span class="material-icons">light_mode</span> {{ 'LIGHT_MODE' | translate }}
                    </ng-container>
                    <ng-container *ngIf="!isDarkMode">
                        <span class="material-icons">dark_mode</span> {{ 'DARK_MODE' | translate }}
                    </ng-container>
                </button>
            </li>

            <li *ngIf="!(isLoggedIn$ | async)" class="mobile-menu-item">
                <a routerLink="/auth/login" (click)="closeMobileMenu()">{{ 'LOGIN' | translate }}</a>
            </li>
            <li *ngIf="!(isLoggedIn$ | async)" class="mobile-menu-item">
                <a routerLink="/auth/register" (click)="closeMobileMenu()">{{ 'REGISTER' | translate }}</a>
            </li>
            <li *ngIf="isLoggedIn$ | async" class="mobile-menu-item">
                <a (click)="logout()">{{ 'LOGOUT' | translate }}</a>
            </li>
        </ul>
    </nav>

    <div class="mobile-nav-overlay" [class.open]="isMenuOpen$ | async" (click)="closeMobileMenu()"></div>

    <main class="app-main">
        <router-outlet></router-outlet>
    </main>

    <footer class="app-footer">
        <p>&copy; 2025 {{ 'APP_TITLE' | translate }}</p>
    </footer>
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <img src="assets/logo/logo_light.png" alt="Logo">
                </div>

                <div class="footer-info">
                    <p>&copy; {{ currentYear }} {{ 'FOOTER_COPYRIGHT' | translate }}</p>
                    <div class="footer-policies">
                        <a routerLink="/privacy">{{ 'FOOTER_PRIVACY' | translate }}</a>
                        <a routerLink="/terms">{{ 'FOOTER_TERMS' | translate }}</a>
                    </div>
                </div>
            </div>
        </div>

    </footer>
</div>